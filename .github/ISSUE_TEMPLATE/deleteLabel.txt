# 0. ì „ì²´ ë¼ë²¨ ì‚­ì œ 
$ORG = "Futronic-Rnd"  # ë‹¹ì‹  ì¡°ì§ëª…

# 1. Issues ON repoë§Œ í•„í„°ë§
$repos = gh repo list $ORG --limit 50 --json name | ConvertFrom-Json | Where-Object { 
    (gh api repos/$ORG/$($_.name) --jq '.has_issues') -eq $true 
}

Write-Host "ğŸ“‹ Issues í™œì„±í™”ëœ repo $($repos.Count)ê°œ ë°œê²¬" -Foreground Cyan

foreach ($repo in $repos) {
    $repoName = "$ORG/$($repo.name)"
    Write-Host "`nğŸ”„ $repoName ë¼ë²¨ ì‚­ì œ ì¤‘..." -Foreground Yellow
    
    # í˜„ì¬ ë¼ë²¨ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
    $currentLabels = gh label list $repoName --json name | ConvertFrom-Json
    
    foreach ($label in $currentLabels) {
        Write-Host "  ğŸ—‘ï¸  $($label.name)" -Foreground Red
        gh label delete $label.name --repo $repoName 2>$null
    }
    
    Write-Host "âœ… $repoName ëª¨ë“  ë¼ë²¨ ì‚­ì œ ì™„ë£Œ!" -Foreground Green
}

Write-Host "`nğŸ‰ ì „ì²´ ê¸°ì¡´ ë¼ë²¨ ì‚­ì œ ì™„ë£Œ! ìƒˆë¡œ ì‹œì‘í•˜ì„¸ìš”." -Foreground Cyan